<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"><title>CSS Modules – Lightning CSS</title><link rel="icon" href="favicon.3aabf677.svg"><link rel="mask-icon" href="favicon.3aabf677.svg" color="#f9bb03"><meta name="description" content="An extremely fast CSS parser, transformer, bundler, and minifier."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="og.jpeg"><meta name="twitter:site" content="@lightningcss"><meta name="twitter:creator" content="@lightningcss"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://lightningcss.dev/css-modules.html"><meta property="og:title" content="CSS Modules – Lightning CSS"><meta property="og:description" content="An extremely fast CSS parser, transformer, bundler, and minifier."><meta property="og:image" content="og.jpeg"><link rel="stylesheet" href="bundling.523e9a32.css"></head><body> <header> <svg viewBox="495 168 360 654"><path class="outer" d="M594.41 805c-.71 0-1.43-.15-2.11-.47a5.015 5.015 0 0 1-2.72-5.83l67.98-253.71H517.11a5.03 5.03 0 0 1-4.44-2.69c-.86-1.65-.73-3.65.34-5.18l26.85-38.35q25.56-36.51 104.91-149.83l106.31-151.82a4.991 4.991 0 0 1 6.21-1.66 5.015 5.015 0 0 1 2.72 5.83L692.03 455h140.45c1.86 0 3.57 1.04 4.43 2.69.86 1.65.73 3.65-.34 5.18l-238.07 340a5.006 5.006 0 0 1-4.1 2.13Zm-67.69-270h137.37c1.55 0 3.02.72 3.97 1.96.95 1.23 1.27 2.84.86 4.34l-62.33 232.61 216.29-308.9H685.52c-1.55 0-3.02-.72-3.97-1.96a4.966 4.966 0 0 1-.86-4.34l62.33-232.61-90.04 128.59q-79.35 113.32-104.91 149.83L526.73 535Z"/><path class="inner" d="M594.41 805c-.71 0-1.43-.15-2.11-.47a5.015 5.015 0 0 1-2.72-5.83l67.98-253.71H517.11a5.03 5.03 0 0 1-4.44-2.69c-.86-1.65-.73-3.65.34-5.18l26.85-38.35q25.56-36.51 104.91-149.83l106.31-151.82a4.991 4.991 0 0 1 6.21-1.66 5.015 5.015 0 0 1 2.72 5.83L692.03 455h140.45c1.86 0 3.57 1.04 4.43 2.69.86 1.65.73 3.65-.34 5.18l-238.07 340a5.006 5.006 0 0 1-4.1 2.13Zm-67.69-270h137.37c1.55 0 3.02.72 3.97 1.96.95 1.23 1.27 2.84.86 4.34l-62.33 232.61 216.29-308.9H685.52c-1.55 0-3.02-.72-3.97-1.96a4.966 4.966 0 0 1-.86-4.34l62.33-232.61-90.04 128.59q-79.35 113.32-104.91 149.83L526.73 535Z"/></svg> <a href="/" class="title">Lightning CSS</a> <p><a href="playground/index.html">Playground</a> • <a href="docs.html">Docs</a> • <a href="https://docs.rs/lightningcss" target="_blank">Rust docs</a> • <a href="https://npmjs.com/lightningcss" target="_blank">npm</a> • <a href="https://github.com/parcel-bundler/lightningcss" target="_blank">GitHub</a></p> </header> <nav> <h3>Docs</h3> <ul> <li><a href="docs.html">Getting started</a></li> <li><a href="transpilation.html">Transpilation</a></li> <li><a href="css-modules.html">CSS Modules</a></li> <li><a href="bundling.html">Bundling</a></li> <li><a href="minification.html">Minification</a></li> <li><a href="transforms.html">Custom transforms</a></li> <script>document.querySelector(`nav a[href="${location.pathname}"]`).setAttribute("aria-current","page");</script> </ul> </nav> <main> <aside> <p></p><div class="table-of-contents"><h3>On this page</h3><ul><li><a href="#class-composition">Class composition</a><ul><li><a href="#dependencies">Dependencies</a></li><li><a href="#global-composition">Global composition</a></li></ul></li><li><a href="#global-exceptions">Global exceptions</a></li><li><a href="#local-css-variables">Local CSS variables</a></li><li><a href="#custom-naming-patterns">Custom naming patterns</a><ul><li><a href="#css-grid">CSS Grid</a></li></ul></li><li><a href="#unsupported-features">Unsupported features</a></li></ul></div><p></p> </aside> <h1 id="css-modules" tabindex="-1">CSS modules</h1> <p>By default, CSS identifiers are global. If two files define the same class names, ids, custom properties, <code>@keyframes</code>, etc., they will potentially clash and overwrite each other. To solve this, Lightning CSS supports <a href="https://github.com/css-modules/css-modules">CSS modules</a>.</p> <p>CSS modules treat the classes defined in each file as unique. Each class name or identifier is renamed to include a unique hash, and a mapping is exported to JavaScript to allow referencing them.</p> <p>To enable CSS modules, provide the <code>cssModules</code> option when calling the Lightning CSS API. When using the CLI, enable the <code>--css-modules</code> flag.</p> <pre class="language-js"><code class="language-js"><span class="keyword token">import</span> <span class="punctuation token">{</span> transform <span class="punctuation token">}</span> <span class="keyword token">from</span> <span class="string token">'lightningcss'</span><span class="punctuation token">;</span>

<span class="keyword token">let</span> <span class="punctuation token">{</span> code<span class="punctuation token">,</span> map<span class="punctuation token">,</span> exports <span class="punctuation token">}</span> <span class="operator token">=</span> <span class="function token">transform</span><span class="punctuation token">(</span><span class="punctuation token">{</span>
  <span class="comment token">// ...</span>
  <span class="literal-property property token">cssModules</span><span class="operator token">:</span> <span class="boolean token">true</span><span class="punctuation token">,</span>
  <span class="literal-property property token">code</span><span class="operator token">:</span> Buffer<span class="punctuation token">.</span><span class="function token">from</span><span class="punctuation token">(</span><span class="template-string token"><span class="string template-punctuation token">`</span><span class="string token">
    .logo {
      background: skyblue;
    }
  </span><span class="string template-punctuation token">`</span></span><span class="punctuation token">)</span>
<span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
</code></pre> <p>This returns an <code>exports</code> object in addition to the compiled code and source map. Each property in the <code>exports</code> object maps from the original name in the source CSS to the compiled (i.e. hashed) name. You can use this mapping in your JavaScript or template files to reference the compiled classes and identifiers.</p> <p>The exports object for the above example might look like this:</p> <pre class="language-js"><code class="language-js"><span class="punctuation token">{</span>
  <span class="literal-property property token">logo</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">name</span><span class="operator token">:</span> <span class="string token">'8h19c6_logo'</span><span class="punctuation token">,</span>
    <span class="literal-property property token">isReferenced</span><span class="operator token">:</span> <span class="boolean token">false</span><span class="punctuation token">,</span>
    <span class="literal-property property token">composes</span><span class="operator token">:</span> <span class="punctuation token">[</span><span class="punctuation token">]</span>
  <span class="punctuation token">}</span>
<span class="punctuation token">}</span>
</code></pre> <h2 id="class-composition" tabindex="-1">Class composition</h2> <p>Style rules in CSS modules can reference other classes with the <code>composes</code> property. This causes the referenced class to be applied whenever the composed class is used, effectively providing a form of style mixins.</p> <pre class="language-css"><code class="language-css"><span class="selector token">.bg-indigo</span> <span class="punctuation token">{</span>
  <span class="property token">background</span><span class="punctuation token">:</span> indigo<span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="selector token">.indigo-white</span> <span class="punctuation token">{</span>
  <span class="property token">composes</span><span class="punctuation token">:</span> bg-indigo<span class="punctuation token">;</span>
  <span class="property token">color</span><span class="punctuation token">:</span> white<span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <p>In the above example, whenever the <code>indigo-white</code> class is applied, the <code>bg-indigo</code> class will be applied as well. This is indicated in the <code>exports</code> object returned by Lightning CSS as follows:</p> <pre class="language-js"><code class="language-js"><span class="punctuation token">{</span>
  <span class="property string-property token">'bg-indigo'</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">name</span><span class="operator token">:</span> <span class="string token">'8h19c6_bg-indigo'</span><span class="punctuation token">,</span>
    <span class="literal-property property token">isReferenced</span><span class="operator token">:</span> <span class="boolean token">true</span><span class="punctuation token">,</span>
    <span class="literal-property property token">composes</span><span class="operator token">:</span> <span class="punctuation token">[</span><span class="punctuation token">]</span>
  <span class="punctuation token">}</span><span class="punctuation token">,</span>
  <span class="property string-property token">'indigo-white'</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">name</span><span class="operator token">:</span> <span class="string token">'8h19c6_indigo-white'</span><span class="punctuation token">,</span>
    <span class="literal-property property token">isReferenced</span><span class="operator token">:</span> <span class="boolean token">false</span><span class="punctuation token">,</span>
    <span class="literal-property property token">composes</span><span class="operator token">:</span> <span class="punctuation token">[</span><span class="punctuation token">{</span>
      <span class="literal-property property token">type</span><span class="operator token">:</span> <span class="string token">'local'</span><span class="punctuation token">,</span>
      <span class="literal-property property token">name</span><span class="operator token">:</span> <span class="string token">'8h19c6_bg-indigo'</span>
    <span class="punctuation token">}</span><span class="punctuation token">]</span>
  <span class="punctuation token">}</span>
<span class="punctuation token">}</span>
</code></pre> <p>Multiple classes can be composed at once by separating them with spaces.</p> <pre class="language-css"><code class="language-css"><span class="selector token">.logo</span> <span class="punctuation token">{</span>
  <span class="property token">composes</span><span class="punctuation token">:</span> bg-indigo padding-large<span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <h3 id="dependencies" tabindex="-1">Dependencies</h3> <p>You can also reference class names defined in a different CSS file using the <code>from</code> keyword:</p> <pre class="language-css"><code class="language-css"><span class="selector token">.logo</span> <span class="punctuation token">{</span>
  <span class="property token">composes</span><span class="punctuation token">:</span> bg-indigo from <span class="string token">"./colors.module.css"</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <p>This outputs an exports object with the dependency information. It is the caller's responsibility to resolve this dependency and apply the target class name when using the <code>transform</code> API. When using the <code>bundle</code> API, this is handled automatically.</p> <pre class="language-js"><code class="language-js"><span class="punctuation token">{</span>
  <span class="literal-property property token">logo</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">name</span><span class="operator token">:</span> <span class="string token">'8h19c6_logo'</span><span class="punctuation token">,</span>
    <span class="literal-property property token">isReferenced</span><span class="operator token">:</span> <span class="boolean token">false</span><span class="punctuation token">,</span>
    <span class="literal-property property token">composes</span><span class="operator token">:</span> <span class="punctuation token">[</span><span class="punctuation token">{</span>
      <span class="literal-property property token">type</span><span class="operator token">:</span> <span class="string token">'dependency'</span><span class="punctuation token">,</span>
      <span class="literal-property property token">name</span><span class="operator token">:</span> <span class="string token">'bg-indigo'</span><span class="punctuation token">,</span>
      <span class="literal-property property token">specifier</span><span class="operator token">:</span> <span class="string token">'./colors.module.css'</span>
    <span class="punctuation token">}</span><span class="punctuation token">]</span>
  <span class="punctuation token">}</span>
<span class="punctuation token">}</span>
</code></pre> <h3 id="global-composition" tabindex="-1">Global composition</h3> <p>Global (i.e. non-hashed) classes can also be composed using the <code>global</code> keyword:</p> <pre class="language-css"><code class="language-css"><span class="selector token">.search</span> <span class="punctuation token">{</span>
  <span class="property token">composes</span><span class="punctuation token">:</span> search-widget from global<span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <h2 id="global-exceptions" tabindex="-1">Global exceptions</h2> <p>Within a CSS module, all class and id selectors are local by default. You can also opt out of this behavior for a single selector using the <code>:global</code> pseudo class.</p> <pre class="language-css"><code class="language-css"><span class="selector token">.foo :global(.bar)</span> <span class="punctuation token">{</span>
  <span class="property token">color</span><span class="punctuation token">:</span> red<span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="selector token">.foo .bar</span> <span class="punctuation token">{</span>
  <span class="property token">color</span><span class="punctuation token">:</span> green<span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <p>compiles to:</p> <pre class="language-css"><code class="language-css"><span class="selector token">.EgL3uq_foo .bar</span> <span class="punctuation token">{</span>
  <span class="property token">color</span><span class="punctuation token">:</span> red<span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="selector token">.EgL3uq_foo .EgL3uq_bar</span> <span class="punctuation token">{</span>
  <span class="property token">color</span><span class="punctuation token">:</span> #ff0<span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <h2 id="local-css-variables" tabindex="-1">Local CSS variables</h2> <p>By default, class names, id selectors, and the names of <code>@keyframes</code>, <code>@counter-style</code>, and CSS grid lines and areas are scoped to the module they are defined in. Scoping for CSS variables and other <a href="https://www.w3.org/TR/css-values-4/#dashed-idents"><code>&lt;dashed-ident&gt;</code></a> names can also be enabled using the <code>dashedIdents</code> option when calling the Lightning CSS API. When using the CLI, enable the <code>--css-modules-dashed-idents</code> flag.</p> <pre class="language-js"><code class="language-js"><span class="keyword token">let</span> <span class="punctuation token">{</span> code<span class="punctuation token">,</span> map<span class="punctuation token">,</span> exports <span class="punctuation token">}</span> <span class="operator token">=</span> <span class="function token">transform</span><span class="punctuation token">(</span><span class="punctuation token">{</span>
  <span class="comment token">// ...</span>
  <span class="literal-property property token">cssModules</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">dashedIdents</span><span class="operator token">:</span> <span class="boolean token">true</span>
  <span class="punctuation token">}</span><span class="punctuation token">,</span>
<span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
</code></pre> <p>When enabled, CSS variables will be renamed so they don't conflict with variable names defined in other files. Referencing a variable uses the standard <code>var()</code> syntax, which Lightning CSS will update to match the locally scoped variable name.</p> <pre class="language-css"><code class="language-css"><span class="selector token">:root</span> <span class="punctuation token">{</span>
  <span class="property token">--accent-color</span><span class="punctuation token">:</span> hotpink<span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="selector token">.button</span> <span class="punctuation token">{</span>
  <span class="property token">background</span><span class="punctuation token">:</span> <span class="function token">var</span><span class="punctuation token">(</span>--accent-color<span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <p>becomes:</p> <pre class="language-css"><code class="language-css"><span class="selector token">:root</span> <span class="punctuation token">{</span>
  <span class="property token">--EgL3uq_accent-color</span><span class="punctuation token">:</span> hotpink<span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="selector token">.EgL3uq_button</span> <span class="punctuation token">{</span>
  <span class="property token">background</span><span class="punctuation token">:</span> <span class="function token">var</span><span class="punctuation token">(</span>--EgL3uq_accent-color<span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <p>You can also reference variables defined in other files using the <code>from</code> keyword:</p> <pre class="language-css"><code class="language-css"><span class="selector token">.button</span> <span class="punctuation token">{</span>
  <span class="property token">background</span><span class="punctuation token">:</span> <span class="function token">var</span><span class="punctuation token">(</span>--accent-color from <span class="string token">"./vars.module.css"</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <p>Global variables may be referenced using the <code>from global</code> syntax.</p> <pre class="language-css"><code class="language-css"><span class="selector token">.button</span> <span class="punctuation token">{</span>
  <span class="property token">color</span><span class="punctuation token">:</span> <span class="function token">var</span><span class="punctuation token">(</span>--color from global<span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> <p>The same syntax also applies to other CSS values that use the <a href="https://www.w3.org/TR/css-values-4/#dashed-idents"><code>&lt;dashed-ident&gt;</code></a> syntax. For example, the <a href="https://drafts.csswg.org/css-fonts-4/#font-palette-values">@font-palette-values</a> rule and <a href="https://drafts.csswg.org/css-fonts-4/#propdef-font-palette">font-palette</a> property use the <code>&lt;dashed-ident&gt;</code> syntax to define and refer to custom font color palettes, and will be scoped and referenced the same way as CSS variables.</p> <h2 id="custom-naming-patterns" tabindex="-1">Custom naming patterns</h2> <p>By default, Lightning CSS prepends the hash of the filename to each class name and identifier in a CSS file. You can configure this naming pattern using the <code>pattern</code> when calling the Lightning CSS API. When using the CLI, provide the <code>--css-modules-pattern</code> option.</p> <p>A pattern is a string with placeholders that will be filled in by Lightning CSS. This allows you to add custom prefixes or adjust the naming convention for scoped classes.</p> <pre class="language-js"><code class="language-js"><span class="keyword token">let</span> <span class="punctuation token">{</span> code<span class="punctuation token">,</span> map<span class="punctuation token">,</span> exports <span class="punctuation token">}</span> <span class="operator token">=</span> <span class="function token">transform</span><span class="punctuation token">(</span><span class="punctuation token">{</span>
  <span class="comment token">// ...</span>
  <span class="literal-property property token">cssModules</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">pattern</span><span class="operator token">:</span> <span class="string token">'my-company-[name]-[hash]-[local]'</span>
  <span class="punctuation token">}</span>
<span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
</code></pre> <p>The following placeholders are currently supported:</p> <ul> <li><code>[name]</code> - The base name of the file, without the extension.</li> <li><code>[hash]</code> - A hash of the full file path.</li> <li><code>[local]</code> - The original class name or identifier.</li> </ul> <div class="warning"> <h3 id="css-grid" tabindex="-1">CSS Grid</h3> <p><strong>Note:</strong> CSS grid line names can be ambiguous due to automatic postfixing done by the browser, which generates line names ending with <code>-start</code> and <code>-end</code> for each grid template area. When using CSS grid, your <code>&quot;pattern&quot;</code> configuration must end with the <code>[local]</code> placeholder so that these references work correctly.</p> <pre class="language-js"><code class="language-js"><span class="keyword token">let</span> <span class="punctuation token">{</span> code<span class="punctuation token">,</span> map<span class="punctuation token">,</span> exports <span class="punctuation token">}</span> <span class="operator token">=</span> <span class="function token">transform</span><span class="punctuation token">(</span><span class="punctuation token">{</span>
  <span class="comment token">// ...</span>
  <span class="literal-property property token">cssModules</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="comment token">// ❌ [local] must be at the end so that </span>
    <span class="comment token">// auto-generated grid line names work</span>
    <span class="literal-property property token">pattern</span><span class="operator token">:</span> <span class="string token">'[local]-[hash]'</span>
    <span class="comment token">// ✅ do this instead</span>
    <span class="literal-property property token">pattern</span><span class="operator token">:</span> <span class="string token">'[hash]-[local]'</span>
  <span class="punctuation token">}</span>
<span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
</code></pre> <pre class="language-css"><code class="language-css"><span class="selector token">.grid</span> <span class="punctuation token">{</span>
  <span class="property token">grid-template-areas</span><span class="punctuation token">:</span> <span class="string token">"nav main"</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="selector token">.nav</span> <span class="punctuation token">{</span>
  <span class="property token">grid-column-start</span><span class="punctuation token">:</span> nav-start<span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre> </div> <h2 id="unsupported-features" tabindex="-1">Unsupported features</h2> <p>Lightning CSS does not currently implement all CSS modules features available in other implementations. Some of these may be added in the future.</p> <ul> <li>Non-function syntax for the <code>:local</code> and <code>:global</code> pseudo classes.</li> <li>The <code>@value</code> rule – superseded by standard CSS variables.</li> <li>The <code>:import</code> and <code>:export</code> ICSS rules.</li> </ul> </main> <footer> Copyright © 2022 Devon Govett and Parcel Contributors. </footer> <script async src="bundling.a1401b31.js"></script> </body></html>