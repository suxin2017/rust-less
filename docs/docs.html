<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"><title>Getting Started – Lightning CSS</title><link rel="icon" href="rust-less/favicon.3aabf677.svg"><link rel="mask-icon" href="rust-less/favicon.3aabf677.svg" color="#f9bb03"><meta name="description" content="An extremely fast CSS parser, transformer, bundler, and minifier."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="rust-less/og.jpeg"><meta name="twitter:site" content="@lightningcss"><meta name="twitter:creator" content="@lightningcss"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://lightningcss.dev/docs.html"><meta property="og:title" content="Getting Started – Lightning CSS"><meta property="og:description" content="An extremely fast CSS parser, transformer, bundler, and minifier."><meta property="og:image" content="rust-less/og.jpeg"><link rel="stylesheet" href="rust-less/bundling.523e9a32.css"></head><body> <header> <svg viewBox="495 168 360 654"><path class="outer" d="M594.41 805c-.71 0-1.43-.15-2.11-.47a5.015 5.015 0 0 1-2.72-5.83l67.98-253.71H517.11a5.03 5.03 0 0 1-4.44-2.69c-.86-1.65-.73-3.65.34-5.18l26.85-38.35q25.56-36.51 104.91-149.83l106.31-151.82a4.991 4.991 0 0 1 6.21-1.66 5.015 5.015 0 0 1 2.72 5.83L692.03 455h140.45c1.86 0 3.57 1.04 4.43 2.69.86 1.65.73 3.65-.34 5.18l-238.07 340a5.006 5.006 0 0 1-4.1 2.13Zm-67.69-270h137.37c1.55 0 3.02.72 3.97 1.96.95 1.23 1.27 2.84.86 4.34l-62.33 232.61 216.29-308.9H685.52c-1.55 0-3.02-.72-3.97-1.96a4.966 4.966 0 0 1-.86-4.34l62.33-232.61-90.04 128.59q-79.35 113.32-104.91 149.83L526.73 535Z"/><path class="inner" d="M594.41 805c-.71 0-1.43-.15-2.11-.47a5.015 5.015 0 0 1-2.72-5.83l67.98-253.71H517.11a5.03 5.03 0 0 1-4.44-2.69c-.86-1.65-.73-3.65.34-5.18l26.85-38.35q25.56-36.51 104.91-149.83l106.31-151.82a4.991 4.991 0 0 1 6.21-1.66 5.015 5.015 0 0 1 2.72 5.83L692.03 455h140.45c1.86 0 3.57 1.04 4.43 2.69.86 1.65.73 3.65-.34 5.18l-238.07 340a5.006 5.006 0 0 1-4.1 2.13Zm-67.69-270h137.37c1.55 0 3.02.72 3.97 1.96.95 1.23 1.27 2.84.86 4.34l-62.33 232.61 216.29-308.9H685.52c-1.55 0-3.02-.72-3.97-1.96a4.966 4.966 0 0 1-.86-4.34l62.33-232.61-90.04 128.59q-79.35 113.32-104.91 149.83L526.73 535Z"/></svg> <a href="/" class="title">Lightning CSS</a> <p><a href="rust-less/playground/index.html">Playground</a> • <a href="rust-less/docs.html">Docs</a> • <a href="https://docs.rs/lightningcss" target="_blank">Rust docs</a> • <a href="https://npmjs.com/lightningcss" target="_blank">npm</a> • <a href="https://github.com/parcel-bundler/lightningcss" target="_blank">GitHub</a></p> </header> <nav> <h3>Docs</h3> <ul> <li><a href="rust-less/docs.html">Getting started</a></li> <li><a href="rust-less/transpilation.html">Transpilation</a></li> <li><a href="rust-less/css-modules.html">CSS Modules</a></li> <li><a href="rust-less/bundling.html">Bundling</a></li> <li><a href="rust-less/minification.html">Minification</a></li> <li><a href="rust-less/transforms.html">Custom transforms</a></li> <script>document.querySelector(`nav a[href="${location.pathname}"]`).setAttribute("aria-current","page");</script> </ul> </nav> <main> <aside> <p></p><div class="table-of-contents"><h3>On this page</h3><ul><li><a href="#from-node">From Node</a></li><li><a href="#from-rust">From Rust</a></li><li><a href="#with-parcel">With Parcel</a></li><li><a href="#from-deno-or-in-browser">From Deno or in browser</a></li><li><a href="#with-webpack">With webpack</a></li><li><a href="#with-vite">With Vite</a></li><li><a href="#from-the-cli">From the CLI</a></li><li><a href="#error-recovery">Error recovery</a></li><li><a href="#source-maps">Source maps</a></li></ul></div><p></p> </aside> <h1 id="getting-started" tabindex="-1">Getting Started</h1> <p>Lightning CSS can be used as a library from JavaScript or Rust, or from a standalone CLI. It can also be wrapped as a plugin in other build tools, and it is built into <a href="https://parceljs.org">Parcel</a> out of the box.</p> <h2 id="from-node" tabindex="-1">From Node</h2> <p>First, install Lightning CSS using a package manager such as npm or Yarn.</p> <pre class="language-shell"><code class="language-shell"><span class="function token">npm</span> <span class="function token">install</span> --save-dev lightningcss
</code></pre> <p>Once installed, import the module and call one of the Lightning CSS APIs. The <code>transform</code> function compiles a CSS stylesheet from a <a href="https://nodejs.org/api/buffer.html">Node Buffer</a>. This example minifies the input CSS, and outputs the compiled code and a source map.</p> <pre class="language-js"><code class="language-js"><span class="keyword token">import</span> <span class="punctuation token">{</span> transform <span class="punctuation token">}</span> <span class="keyword token">from</span> <span class="string token">'lightningcss'</span><span class="punctuation token">;</span>

<span class="keyword token">let</span> <span class="punctuation token">{</span> code<span class="punctuation token">,</span> map <span class="punctuation token">}</span> <span class="operator token">=</span> <span class="function token">transform</span><span class="punctuation token">(</span><span class="punctuation token">{</span>
  <span class="literal-property property token">filename</span><span class="operator token">:</span> <span class="string token">'style.css'</span><span class="punctuation token">,</span>
  <span class="literal-property property token">code</span><span class="operator token">:</span> Buffer<span class="punctuation token">.</span><span class="function token">from</span><span class="punctuation token">(</span><span class="string token">'.foo { color: red }'</span><span class="punctuation token">)</span><span class="punctuation token">,</span>
  <span class="literal-property property token">minify</span><span class="operator token">:</span> <span class="boolean token">true</span><span class="punctuation token">,</span>
  <span class="literal-property property token">sourceMap</span><span class="operator token">:</span> <span class="boolean token">true</span>
<span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
</code></pre> <p>See <a href="rust-less/transpilation.html">Transpilation</a> for details about syntax lowering and vendor prefixing CSS for your browser targets, and the draft syntax support in Lightning CSS. You can also use the <code>bundle</code> API to process <code>@import</code> rules and inline them – see <a href="rust-less/bundling.html">Bundling</a> for details.</p> <p>The <a href="https://github.com/parcel-bundler/lightningcss/blob/master/node/index.d.ts">TypeScript definitions</a> also include documentation for all API options.</p> <h2 id="from-rust" tabindex="-1">From Rust</h2> <p>Lightning CSS can also be used as a Rust library to parse, transform, and minify CSS. See the Rust API docs on <a href="https://docs.rs/lightningcss">docs.rs</a>.</p> <h2 id="with-parcel" tabindex="-1">With Parcel</h2> <p><a href="https://parceljs.org">Parcel</a> includes Lightning CSS as the default CSS transformer. You should also add a <code>browserslist</code> property to your <code>package.json</code>, which defines the target browsers that your CSS will be compiled for.</p> <p>While Lightning CSS handles the most commonly used PostCSS plugins like <code>autoprefixer</code>, <code>postcss-preset-env</code>, and CSS modules, you may still need PostCSS for more custom plugins like TailwindCSS. If that's the case, your PostCSS config will be picked up automatically. You can remove the plugins listed above from your PostCSS config, and they'll be handled by Lightning CSS.</p> <p>You can also configure Lightning CSS in the <code>package.json</code> in the root of your project. Currently, three options are supported: <a href="rust-less/transpilation.html#draft-syntax">drafts</a>, which can be used to enable CSS nesting and custom media queries, <a href="rust-less/transpilation.html#pseudo-class-replacement">pseudoClasses</a>, which allows replacing some pseudo classes like <code>:focus-visible</code> with normal classes that can be applied via JavaScript (e.g. polyfills), and <a href="rust-less/css-modules.html">cssModules</a>, which enables CSS modules globally rather than only for files ending in <code>.module.css</code>, or accepts an options object.</p> <pre class="language-json"><code class="language-json"><span class="punctuation token">{</span>
  <span class="property token">"@parcel/transformer-css"</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="property token">"cssModules"</span><span class="operator token">:</span> <span class="boolean token">true</span><span class="punctuation token">,</span>
    <span class="property token">"drafts"</span><span class="operator token">:</span> <span class="punctuation token">{</span>
      <span class="property token">"nesting"</span><span class="operator token">:</span> <span class="boolean token">true</span><span class="punctuation token">,</span>
      <span class="property token">"customMedia"</span><span class="operator token">:</span> <span class="boolean token">true</span>
    <span class="punctuation token">}</span><span class="punctuation token">,</span>
    <span class="property token">"pseudoClasses"</span><span class="operator token">:</span> <span class="punctuation token">{</span>
      <span class="property token">"focusVisible"</span><span class="operator token">:</span> <span class="string token">"focus-ring"</span>
    <span class="punctuation token">}</span>
  <span class="punctuation token">}</span>
<span class="punctuation token">}</span>
</code></pre> <p>See the <a href="https://parceljs.org/languages/css">Parcel docs</a> for more details.</p> <h2 id="from-deno-or-in-browser" tabindex="-1">From Deno or in browser</h2> <p>The <code>lightningcss-wasm</code> package can be used in Deno or directly in browsers. This uses a WebAssembly build of Lightning CSS. Use <code>TextEncoder</code> and <code>TextDecoder</code> convert code from a string to a typed array and back.</p> <pre class="language-js"><code class="language-js"><span class="keyword token">import</span> init<span class="punctuation token">,</span> <span class="punctuation token">{</span> transform <span class="punctuation token">}</span> <span class="keyword token">from</span> <span class="string token">'https://esm.run/lightningcss-wasm'</span><span class="punctuation token">;</span>

<span class="keyword token">await</span> <span class="function token">init</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="keyword token">let</span> <span class="punctuation token">{</span>code<span class="punctuation token">,</span> map<span class="punctuation token">}</span> <span class="operator token">=</span> <span class="function token">transform</span><span class="punctuation token">(</span><span class="punctuation token">{</span>
  <span class="literal-property property token">filename</span><span class="operator token">:</span> <span class="string token">'style.css'</span><span class="punctuation token">,</span>
  <span class="literal-property property token">code</span><span class="operator token">:</span> <span class="keyword token">new</span> <span class="class-name token">TextEncoder</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">.</span><span class="function token">encode</span><span class="punctuation token">(</span><span class="string token">'.foo { color: red }'</span><span class="punctuation token">)</span><span class="punctuation token">,</span>
  <span class="literal-property property token">minify</span><span class="operator token">:</span> <span class="boolean token">true</span><span class="punctuation token">,</span>
<span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

console<span class="punctuation token">.</span><span class="function token">log</span><span class="punctuation token">(</span><span class="keyword token">new</span> <span class="class-name token">TextDecoder</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">.</span><span class="function token">decode</span><span class="punctuation token">(</span>code<span class="punctuation token">)</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
</code></pre> <p>Note that the <code>bundle</code> and visitor APIs are not currently available in the WASM build.</p> <h2 id="with-webpack" tabindex="-1">With webpack</h2> <p><a href="https://webpack.js.org/plugins/css-minimizer-webpack-plugin/">css-minimizer-webpack-plugin</a> has built in support for Lightning CSS. To use it, first install Lightning CSS in your project with a package manager like npm or Yarn:</p> <pre class="language-shell"><code class="language-shell"><span class="function token">npm</span> <span class="function token">install</span> --save-dev lightningcss css-minimizer-webpack-plugin browserslist
</code></pre> <p>Next, configure <code>css-minifier-webpack-plugin</code> to use Lightning CSS as the minifier. You can provide options using the <code>minimizerOptions</code> object. See <a href="rust-less/transpilation.html">Transpilation</a> for details.</p> <pre class="language-js"><code class="language-js"><span class="comment token">// webpack.config.js</span>
<span class="keyword token">const</span> CssMinimizerPlugin <span class="operator token">=</span> <span class="function token">require</span><span class="punctuation token">(</span><span class="string token">'css-minimizer-webpack-plugin'</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="keyword token">const</span> lightningcss <span class="operator token">=</span> <span class="function token">require</span><span class="punctuation token">(</span><span class="string token">'lightningcss'</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="keyword token">const</span> browserslist <span class="operator token">=</span> <span class="function token">require</span><span class="punctuation token">(</span><span class="string token">'browserslist'</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

module<span class="punctuation token">.</span>exports <span class="operator token">=</span> <span class="punctuation token">{</span>
  <span class="literal-property property token">optimization</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">minimize</span><span class="operator token">:</span> <span class="boolean token">true</span><span class="punctuation token">,</span>
    <span class="literal-property property token">minimizer</span><span class="operator token">:</span> <span class="punctuation token">[</span>
      <span class="keyword token">new</span> <span class="class-name token">CssMinimizerPlugin</span><span class="punctuation token">(</span><span class="punctuation token">{</span>
        <span class="literal-property property token">minify</span><span class="operator token">:</span> CssMinimizerPlugin<span class="punctuation token">.</span>lightningCssMinify<span class="punctuation token">,</span>
        <span class="literal-property property token">minimizerOptions</span><span class="operator token">:</span> <span class="punctuation token">{</span>
          <span class="literal-property property token">targets</span><span class="operator token">:</span> lightningcss<span class="punctuation token">.</span><span class="function token">browserslistToTargets</span><span class="punctuation token">(</span><span class="function token">browserslist</span><span class="punctuation token">(</span><span class="string token">'>= 0.25%'</span><span class="punctuation token">)</span><span class="punctuation token">)</span>
        <span class="punctuation token">}</span><span class="punctuation token">,</span>
      <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">,</span>
    <span class="punctuation token">]</span><span class="punctuation token">,</span>
  <span class="punctuation token">}</span><span class="punctuation token">,</span>
<span class="punctuation token">}</span><span class="punctuation token">;</span>
</code></pre> <h2 id="with-vite" tabindex="-1">With Vite</h2> <p>Vite supports Lightning CSS out of the box. First, install Lightning CSS into your project:</p> <pre class="language-shell"><code class="language-shell"><span class="function token">npm</span> <span class="function token">install</span> --save-dev lightningcss
</code></pre> <p>Then, set <code>'lightningcss'</code> as CSS <a href="https://vitejs.dev/config/shared-options.html#css-transformer">transformer</a> and <a href="https://vitejs.dev/config/build-options.html#build-cssminify">minifier</a> in your Vite config. You can also configure Lightning CSS options such as targets and css modules via the <a href="https://vitejs.dev/config/shared-options.html#css-lightningcss">css.lightningcss</a> option in your Vite config.</p> <pre class="language-js"><code class="language-js"><span class="comment token">// vite.config.ts</span>
<span class="keyword token">import</span> <span class="punctuation token">{</span>browserslistToTargets<span class="punctuation token">}</span> <span class="keyword token">from</span> <span class="string token">'lightningcss'</span><span class="punctuation token">;</span>

<span class="keyword token">export</span> <span class="keyword token">default</span> <span class="punctuation token">{</span>
  <span class="literal-property property token">css</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">transformer</span><span class="operator token">:</span> <span class="string token">'lightningcss'</span><span class="punctuation token">,</span>
    <span class="literal-property property token">lightningcss</span><span class="operator token">:</span> <span class="punctuation token">{</span>
      <span class="literal-property property token">targets</span><span class="operator token">:</span> <span class="function token">browserslistToTargets</span><span class="punctuation token">(</span><span class="function token">browserslist</span><span class="punctuation token">(</span><span class="string token">'>= 0.25%'</span><span class="punctuation token">)</span><span class="punctuation token">)</span>
    <span class="punctuation token">}</span>
  <span class="punctuation token">}</span><span class="punctuation token">,</span>
  <span class="literal-property property token">build</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="literal-property property token">cssMinify</span><span class="operator token">:</span> <span class="string token">'lightningcss'</span>
  <span class="punctuation token">}</span>
<span class="punctuation token">}</span><span class="punctuation token">;</span>
</code></pre> <h2 id="from-the-cli" tabindex="-1">From the CLI</h2> <p>Lightning CSS includes a standalone CLI that can be used to compile, minify, and bundle CSS files. It can be used when you only need to compile CSS, and don't need more advanced functionality from a larger build tool such as code splitting and support for other languages.</p> <p>To use the CLI, install the <code>lightningcss-cli</code> package with an npm compatible package manager:</p> <pre class="language-shell"><code class="language-shell"><span class="function token">npm</span> <span class="function token">install</span> --save-dev lightningcss-cli
</code></pre> <p>Then, you can run the <code>lightningcss</code> command via <code>npx</code>, <code>yarn</code>, or by setting up a script in your package.json.</p> <pre class="language-json"><code class="language-json"><span class="punctuation token">{</span>
  <span class="property token">"scripts"</span><span class="operator token">:</span> <span class="punctuation token">{</span>
    <span class="property token">"build"</span><span class="operator token">:</span> <span class="string token">"lightningcss --minify --bundle --targets '>= 0.25%' input.css -o output.css"</span>
  <span class="punctuation token">}</span>
<span class="punctuation token">}</span>
</code></pre> <p>To see all of the available options, use the <code>--help</code> argument:</p> <pre class="language-shell"><code class="language-shell">npx lightningcss <span class="parameter token variable">--help</span>
</code></pre> <h2 id="error-recovery" tabindex="-1">Error recovery</h2> <p>By default, Lightning CSS is strict, and will error when parsing an invalid rule or declaration. However, sometimes you may encounter a third party library that you can't easily modify, which unintentionally contains invalid syntax, or IE-specific hacks. In these cases, you can enable the <code>errorRecovery</code> option (or <code>--error-recovery</code> CLI flag). This will skip over invalid rules and declarations, omitting them in the output, and producing a warning instead of an error. You should also open an issue or PR to fix the issue in the library if possible.</p> <h2 id="source-maps" tabindex="-1">Source maps</h2> <p>Lightning CSS supports generating source maps when compiling, minifying, and bundling your source code to make debugging easier. Use the <code>sourceMap</code> option to enable it when using the API, or the <code>--sourcemap</code> CLI flag.</p> <p>If the input CSS came from another compiler such as Sass or Less, you can also pass an input source map to Lightning CSS using the <code>inputSourceMap</code> API option. This will map compiled locations back to their location in the original source code.</p> <p>Finally, the <code>projectRoot</code> option can be used to make file paths in source maps relative to a root directory. This makes build stable between machines.</p> </main> <footer> Copyright © 2022 Devon Govett and Parcel Contributors. </footer> <script async src="rust-less/bundling.a1401b31.js"></script> </body></html>